# E2E テストスクリプト

OshiTalk アプリケーションの E2E テストを実行するためのスクリプト集です。

## セットアップ

```bash
# 依存関係のインストール
cd scripts
npm install
```

## 使用方法

### 1. テストデータセットアップ

```bash
npm run setup
```

- テスト用のファン・インフルエンサーアカウントを作成
- テスト用の通話枠を作成
- 必要な初期データを設定

### 2. テストデータクリーンアップ

```bash
npm run cleanup
```

- テスト用データを完全に削除
- データベースをクリーンな状態に戻す

### 3. 自動テスト実行

```bash
npm run test
```

- 各機能の自動テストを実行
- テスト結果をレポート表示

### 4. 完全テストフロー

```bash
npm run full-test
```

- クリーンアップ → セットアップ → テスト実行を順次実行

## テスト内容

### 認証テスト

- ファンアカウントログイン
- インフルエンサーアカウントログイン

### Stripe Connect テスト

- アカウント状態確認
- 設定完了確認

### 通話機能テスト

- 通話枠作成
- 入札作成
- 支払い処理
- ビデオ通話設定

## トラブルシューティング

### よくある問題

1. **Supabase 接続エラー**: 環境変数を確認
2. **認証エラー**: テストアカウントの作成を確認
3. **API 接続エラー**: バックエンドサーバーの起動を確認

### ログ確認

- スクリプト実行時のコンソール出力を確認
- エラーメッセージに従って問題を特定

## 注意事項

- テスト実行前にバックエンドサーバーが起動していることを確認
- 本番環境では絶対に実行しない
- テストデータは本番データと分離されている
